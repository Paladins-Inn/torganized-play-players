---
databaseChangeLog:
  - changeSet:
      id: STORMKNIGHTS-init
      author: rlichti
      context: init
      labels: 'v1.0.0,player'
      dbms: postgresql
      created: '1.0.0'
      changes:
        - createTable:
            tableName: STORMKNIGHTS
            remarks: The player connected to the torganized play
            columns:
              - column:
                  name: ID
                  type: BIGINT
                  autoIncrement: true
                  startWith: 10000
                  remarks: The Database internal ID
                constraints:
                  - primaryKey: true
                  - primaryKeyName: STORMKNIGHTS_PK
                  - nullable: false
                  - notNullConstraintName: STORMKNIGHTS_ID_NN
                  - unique: true
                  - uniqueConstraintName: STORMKNIGHTS_ID_UK
              - column:
                  name: UID
                  type: UUID
                  valueComputed: uuid_generate_v4()
                constraints:
                  - nullable: false
                  - notNullConstraintName: STORMKNIGHTS_UID_NN
                  - unique: true
                  - uniqueConstraintName: STORMKNIGHTS_UID_UK
              - column:
                  name: CREATED
                  type: TIMESTAMP WITH TIME ZONE
                  valueComputed: now()
                constraints:
                  - nullable: false
                  - notNullConstraintName: STORMKNIGHTS_CREATED_NN
              - column:
                  name: MODIFIED
                  type: TIMESTAMP WITH TIME ZONE
                  valueComputed: now()
                constraints:
                  - nullable: false
                  - notNullConstraintName: STORMKNIGHTS_MODIFIED_NN
              - column:
                  name: DELETED
                  type: TIMESTAMP WITH TIME ZONE
              - column:
                  name: NAMESPACE
                  type: VARCHAR(100)
                  defaultValue: './.'
                constraints:
                  - nullable: false
                  - notNullConstraintName: STORMKNIGHTS_NAMESPACE_NN
              - column:
                  name: NAME
                  type: VARCHAR(100)
                constraints:
                  - nullable: false
                  - notNullConstraintName: STORMKNIGHTS_NAME_NN
              - column:
                  name: PLAYER
                  type: BIGINT
                constraints:
                  - nullable: false
                  - notNullConstraintName: STORMKNIGHTS_PLAYER_NN
                  - foreignKeyName: STORMKNIGHTS_PLAYER_FK
                  - referencedTableName: PLAYERS
                  - referencedColumnNames: ID
        - addUniqueConstraint:
            constraintName: STORMKNIGHTS_NAME_UK
            tableName: STORMKNIGHTS
            columnNames: 'NAMESPACE,NAME'
        - createIndex:
            indexName: STORMKNIGHTS_PLAYER_IDX
            tableName: STORMKNIGHTS
            unique: false
            columns:
              - column:
                  name: PLAYER
                  descending: false
        